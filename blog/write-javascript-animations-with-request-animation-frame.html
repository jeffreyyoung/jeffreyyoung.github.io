<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"><meta content="#000000" name="theme-color"><script>window&&!window._jCache&&(window._jCache={})</script><link href="/manifest.json" rel="manifest"><link href="/favicon.ico" rel="shortcut icon"><link href="/static/css/main.a3053b36.css" rel="stylesheet"><script src="https://jeffreyyoung.disqus.com/embed.js" async></script><title>Javascript Alternative to animateMotion</title><meta content="How to write a javascript alternative to animateMotion" name="description" data-react-helmet="true"><script data-react-helmet="true">if (window && !window._jCache) { window._jCache = {};}
						window._jCache['undefined'] = {"post":{"html":"<p>I recently was trying to write a simple svg animation for a client.  To finish the animation I needed to animate a circle along a bezier path.  I quickly found  <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/animateMotion\"><animateMotion></a> which made doing such an animation simple, but soon learned <code>animateMotion</code> is not supported by any versions of Internet Explorer. Since I had trouble finding any straight forward ways to do the animation using css, I decided to write the animation using javascript. Which brings us to: </p>\n<h3 id=\"how-to-animate-a-svg-circle-along-an-svg-path-using-javascript\">How to animate a svg circle along an svg path using javascript.</h3>\n<p>To do our animation we'll write a function that will execute one \"step\" of our animation.  Whenever we want to modify the dom, we'll call <code>requestAnimationFrame</code> and pass in our step function.  Letting the browser call our step function via <code>requestAnimationFrame</code> allows the browser to batch dom manipulations together, resulting in fewer unnecessary repaints, which means a more performant animation.</p>\n<pre><code class=\"javascript language-javascript\">function animateProgress(duration /*duration of animation*/, animateElement /*callback function to animate our javascript element*/) {\n  var start = null;\n  function step(timestamp) {\n    if (!start) {\n      start = timestamp;\n    }\n    var timeSinceAnimationStart = timestamp - start;\n    var percentProgress = timeSinceAnimationStart / duration;\n\n    animateElement(percentProgress);\n    if (timeSinceAnimationStart &lt; duration) {\n      requestAnimationFrame(step);\n    } else {\n      animateElement(1); //animation is Finished :D\n    }\n  }\n\n  requestAnimationFrame(step);\n}\n/**\n  from - initial value of animated element at beginning of animation\n  to - final value of animated element at end of animation\n  duration - time in milliseconds of animation\n  animateElement - call back to animate element\n*/\nfunction animate(from, to, duration, animateElement) {\n  animateProgress(duration, function(percentProgress) {\n    var nextValue = from + (to - from) * percentProgress;\n    animateElement(nextValue);\n  })\n}</code></pre>\n<p>We can use our animate function like so:</p>\n<pre><code class=\"javascript language-javascript\">var redSquare = document.getElementById('red-square')\nanimate(0, 100, 1000, function(nextValue) {\n  redSquare.style.left = nextValue+'px';\n})</code></pre>\n<iframe height='265' scrolling='no' title='Animation With requestAnimationFrame' src='//codepen.io/jeffreyyoung/embed/xPWmpM/?height=265&theme-id=0&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/jeffreyyoung/pen/xPWmpM/'>Animation With requestAnimationFrame</a> by Jeff (<a href='https://codepen.io/jeffreyyoung'>@jeffreyyoung</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p>In the above code, we are animating the <code>left</code> style of the square element, from 0 to 100, over a period of 1000 milliseconds</p>\n<p>Now if we wanted to animate a svg circle along a path, we could do so with the following code: </p>\n<pre><code class=\"javascript language-javascript\">function animateCircleAlongPath(circle, path) {\n    animate(0, path.getTotalLength(), 3000, function(currentLengthOnPath) {\n    var nextCoords = path.getPointAtLength(currentLengthOnPath);\n        circle.setAttribute('cx', nextCoords.x);\n        circle.setAttribute('cy', nextCoords.y);\n  })\n}</code></pre>\n<iframe height='265' scrolling='no' title='SVG Animation With requestAnimationFrame' src='//codepen.io/jeffreyyoung/embed/QOmzXQ/?height=265&theme-id=0&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/jeffreyyoung/pen/QOmzXQ/'>SVG Animation With requestAnimationFrame</a> by Jeff (<a href='https://codepen.io/jeffreyyoung'>@jeffreyyoung</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>","meta":{"title":"Javascript Alternative to animateMotion","image":"/images/byu-big-data.png","imageDescription":"Screen shot of the current website","category":"blog","id":203948902,"order":10,"description":"How to write a javascript alternative to animateMotion","createdTime":"Wed Nov 22 2017 00:38:32 GMT-0700 (MST)"}}}</script><link href="https://c.disquscdn.com/next/embed/styles/lounge.c61e7efbeb6a4ac7d81f7c61a454a72c.css" rel="preload" as="style"><link href="https://c.disquscdn.com/next/embed/common.bundle.8edffe1405dcc2d5eb5ee9d96a2866d1.js" rel="preload" as="script"><link href="https://c.disquscdn.com/next/embed/lounge.bundle.b4f0f934e300a59410ed8012277d0fd8.js" rel="preload" as="script"><link href="https://disqus.com/next/config.js" rel="preload" as="script"><script src="https://c.disquscdn.com/next/embed/alfalfa.4a5fcca1fe50a757044dfd331b660625.js" async charset="UTF-8"></script></head><body><div id="root"><div class="sans-serif"><div class=""><section class="Project bg-white"><div class="center black-90 min-vh-100 pa3 pt5 measure-wide"><nav><a class="BackArrow no-underline underline-hover blue" href="/blog"><span role="img" aria-label="back">ðŸ‘ˆ</span>Blog</a></nav><div><h1 class="f1">Javascript Alternative to animateMotion</h1><h3 class="f3 red">How to write a javascript alternative to animateMotion</h3><article class="lh-copy markdown-post markdown-body pb5"><p>I recently was trying to write a simple svg animation for a client. To finish the animation I needed to animate a circle along a bezier path. I quickly found<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/animateMotion"><animatemotion></animatemotion></a>which made doing such an animation simple, but soon learned<code>animateMotion</code>is not supported by any versions of Internet Explorer. Since I had trouble finding any straight forward ways to do the animation using css, I decided to write the animation using javascript. Which brings us to:</p><h3 id="how-to-animate-a-svg-circle-along-an-svg-path-using-javascript">How to animate a svg circle along an svg path using javascript.</h3><p>To do our animation we'll write a function that will execute one "step" of our animation. Whenever we want to modify the dom, we'll call<code>requestAnimationFrame</code>and pass in our step function. Letting the browser call our step function via<code>requestAnimationFrame</code>allows the browser to batch dom manipulations together, resulting in fewer unnecessary repaints, which means a more performant animation.</p><pre><code class="javascript language-javascript">function animateProgress(duration /*duration of animation*/, animateElement /*callback function to animate our javascript element*/) {
  var start = null;
  function step(timestamp) {
    if (!start) {
      start = timestamp;
    }
    var timeSinceAnimationStart = timestamp - start;
    var percentProgress = timeSinceAnimationStart / duration;

    animateElement(percentProgress);
    if (timeSinceAnimationStart &lt; duration) {
      requestAnimationFrame(step);
    } else {
      animateElement(1); //animation is Finished :D
    }
  }

  requestAnimationFrame(step);
}
/**
  from - initial value of animated element at beginning of animation
  to - final value of animated element at end of animation
  duration - time in milliseconds of animation
  animateElement - call back to animate element
*/
function animate(from, to, duration, animateElement) {
  animateProgress(duration, function(percentProgress) {
    var nextValue = from + (to - from) * percentProgress;
    animateElement(nextValue);
  })
}</code></pre><p>We can use our animate function like so:</p><pre><code class="javascript language-javascript">var redSquare = document.getElementById('red-square')
animate(0, 100, 1000, function(nextValue) {
  redSquare.style.left = nextValue+'px';
})</code></pre><iframe height="265" scrolling="no" title="Animation With requestAnimationFrame" src="//codepen.io/jeffreyyoung/embed/xPWmpM/?height=265&theme-id=0&default-tab=result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%">See the Pen &lt;a href='https://codepen.io/jeffreyyoung/pen/xPWmpM/'>Animation With requestAnimationFrame&lt;/a> by Jeff (&lt;a href='https://codepen.io/jeffreyyoung'>@jeffreyyoung&lt;/a>) on &lt;a href='https://codepen.io'>CodePen&lt;/a>.</iframe><p>In the above code, we are animating the<code>left</code>style of the square element, from 0 to 100, over a period of 1000 milliseconds</p><p>Now if we wanted to animate a svg circle along a path, we could do so with the following code:</p><pre><code class="javascript language-javascript">function animateCircleAlongPath(circle, path) {
    animate(0, path.getTotalLength(), 3000, function(currentLengthOnPath) {
    var nextCoords = path.getPointAtLength(currentLengthOnPath);
        circle.setAttribute('cx', nextCoords.x);
        circle.setAttribute('cy', nextCoords.y);
  })
}</code></pre><iframe height="265" scrolling="no" title="SVG Animation With requestAnimationFrame" src="//codepen.io/jeffreyyoung/embed/QOmzXQ/?height=265&theme-id=0&default-tab=result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%">See the Pen &lt;a href='https://codepen.io/jeffreyyoung/pen/QOmzXQ/'>SVG Animation With requestAnimationFrame&lt;/a> by Jeff (&lt;a href='https://codepen.io/jeffreyyoung'>@jeffreyyoung&lt;/a>) on &lt;a href='https://codepen.io'>CodePen&lt;/a>.</iframe></article><p>Anything you would have done differently? Anything that could be done better?</p><hr><div id="disqus_thread"><iframe id="dsq-app458" name="dsq-app458" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="https://disqus.com/embed/comments/?base=default&f=jeffreyyoung&t_u=http%3A%2F%2Flocalhost%3A45678%2Fblog%2Fwrite-javascript-animations-with-request-animation-frame&t_d=Javascript%20Alternative%20to%20animateMotion&t_t=Javascript%20Alternative%20to%20animateMotion&s_o=default#version=e90c518d9f9439681a4b12a8675f85cb" style="width:1px!important;min-width:100%!important;border:none!important;overflow:hidden!important;height:403px!important" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width:512px!important;border:none!important;overflow:hidden!important;top:0!important;min-width:512px!important;max-width:512px!important;position:fixed!important;z-index:2147483646!important;height:18px!important;min-height:18px!important;max-height:18px!important;display:none!important"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width:512px!important;border:none!important;overflow:hidden!important;bottom:0!important;min-width:512px!important;max-width:512px!important;position:fixed!important;z-index:2147483646!important;height:18px!important;min-height:18px!important;max-height:18px!important;display:none!important"></iframe></div></div></div></section></div></div></div><script src="/static/js/main.3a342c5b.js" type="text/javascript"></script><iframe style="display:none"></iframe></body></html>